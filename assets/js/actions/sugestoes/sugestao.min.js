$(function(){function e(e){$("#lista-sugestoes > *").remove(),$.isEmptyObject(e)?($("<tr>",{class:"info",id:"sugestao-vazia"}).appendTo("#lista-sugestoes"),$("<td>",{colspan:7,text:"Não há mensagens!"}).appendTo("#sugestao-vazia")):$.each(e,function(e,s){var t="";t="Respondido"===s.status?"success":"warning",$("<tr>",{class:t,id:"sugestao-"+e}).appendTo("#lista-sugestoes"),$("<td>",{append:$("<i>",{class:"glyphicon glyphicon-comment"})}).appendTo("#sugestao-"+e),$("<td>",{text:s.matricula}).appendTo("#sugestao-"+e),$("<td>",{text:s.setor}).appendTo("#sugestao-"+e),$("<td>",{class:"text-justify",text:s.sugestao.toUpperCase()}).appendTo("#sugestao-"+e),$("<td>",{text:s.data_sugestao}).appendTo("#sugestao-"+e),$("<td>",{text:s.status.toUpperCase()}).appendTo("#sugestao-"+e),"Respondido"===s.status?$("<td>",{class:"text-center",append:$("<a>",{style:"cursor: pointer;",text:"Visualizar",click:function(e){e.preventDefault(),bootbox.alert({title:"Respondido em: "+s.data_resposta,message:s.resposta.toUpperCase()})}})}).appendTo("#sugestao-"+e):$("<td>",{class:"text-center",append:$("<i>",{class:"glyphicon glyphicon-time"})}).appendTo("#sugestao-"+e)})}var s=new Sugestao;e(s.listar(parseInt($(".listar-por-sugestoes:checked").val(),10))),$(".listar-por-sugestoes").change(function(){e(s.listar(parseInt($(this).val(),10)))}),$("#txtMessage").keyup(function(e){$(this).val().length>=0&&$(this).val().length<=2e3&&$("#txtMessageCaracter").html($(this).val().length),$.trim($(this).val())?$("#enviar-sugestao").prop("disabled",!1):$("#enviar-sugestao").prop("disabled",!0)}),$("#enviar-sugestao").click(function(t){t.preventDefault();var a=parseInt($("#cbTipoReclamacao option:selected").val(),10),o=$.trim($("#txtMessage").val()),r=$.trim($("#txtMatricula").val()),p={tipo:a,matricula:r,sugestao:o.toUpperCase()};JSON.parse(s.criar(p))?($("#aviso-sugestoes > *").remove(),$("#aviso-sugestoes").removeClass("alert").removeClass("alert-success").removeClass("alert-danger"),$("<p>",{text:" Mensagem enviada com sucesso!",prepend:$("<i>",{class:"glyphicon glyphicon-ok"})}).appendTo("#aviso-sugestoes"),$("#cbTipoReclamacao").prop("selectedIndex",5),$("#txtMessage").val(""),$("#aviso-sugestoes").addClass("alert alert-success"),$("#enviar-sugestao").prop("disabled",!0),e(s.listar(parseInt($(".listar-por-sugestoes:checked").val(),10))),$("#txtMessageCaracter").html(0),setTimeout(function(){$("#aviso-sugestoes > *").remove(),$("#aviso-sugestoes").removeClass("alert").removeClass("alert-success").removeClass("alert-danger")},5e3)):($("<p>",{text:" Ocorreu um erro, contate o suporte!",prepend:$("<i>",{class:"glyphicon glyphicon-remove"})}).appendTo("#aviso-sugestoes"),$("#aviso-sugestoes").addClass("alert alert-danger"),setTimeout(function(){$("#aviso-sugestoes > *").remove(),$("#aviso-sugestoes").removeClass("alert").removeClass("alert-success").removeClass("alert-danger")},5e3))})});