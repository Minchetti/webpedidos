(function(){this.Funcionario=function(){$.ajaxSetup({type:"POST",dataType:"JSON"}),Funcionario.prototype.init=function(){sessionStorage.setItem("funcionarios",JSON.stringify([]))},Funcionario.prototype.listar=function(o){var n=null;return $.ajax({url:"funcionario/funcionario/listar",async:!1,data:{funcionario:o},success:function(o){n=o},error:function(o){console.log(o)}}),n},Funcionario.prototype.adicionar=function(o){var n=[],i=!1;return $.each($.parseJSON(sessionStorage.getItem("funcionarios")),function(o,i){n.push({matricula:i.matricula,nome:i.nome,setor:i.setor,ghe:i.ghe,local:i.local,turno:i.turno,cliente:i.cliente,cc:i.cc})}),$.isEmptyObject(n)||n[0].cliente===o[0].cliente?($.each(o,function(o,i){var r=!0,t=i.matricula,e=i.setor,a=$.parseJSON(sessionStorage.getItem("funcionarios"));$.isEmptyObject(a)||$.each(a,function(o,n){n.matricula===t&&(r=!1),n.setor!==e&&(r=!1)}),r&&n.push({matricula:i.matricula,nome:i.nome,setor:i.setor,ghe:i.ghe,local:i.local,turno:i.turno,cliente:i.cliente,cc:i.cc})}),sessionStorage.setItem("funcionarios",JSON.stringify(n))):i=!0,i},Funcionario.prototype.listarPorSetor=function(o,n){var i=null;return $.ajax({url:"funcionario/funcionario/listarporsetor",async:!1,beforeSend:function(){$("#btn-adicionarSetor").text(" Carregando").prepend($("<i>",{class:"fa fa-hourglass-half","aria-hidden":!0}))},data:{setor:o,depto:n},success:function(o){$("#btn-adicionarSetor").text(" Adicionar").prepend($("<i>",{class:"fa fa-plus","aria-hidden":!0})),i=o},error:function(o){console.log(o)}}),i},Funcionario.prototype.getFuncionarioFromStorage=function(){return $.parseJSON(sessionStorage.getItem("funcionarios"))},Funcionario.prototype.remover=function(o){var n=this.getFuncionarioFromStorage();funcionarios=$.grep(n,function(n){return n.matricula!==o}),sessionStorage.removeItem("funcionarios"),this.adicionar(funcionarios)}}})();